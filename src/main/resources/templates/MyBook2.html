<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Book Store</title>
     <script src="https://kit.fontawesome.com/0faddc1af8.js" crossorigin="anonymous"></script>
   <script type="text/javascript" th:src="@{/webjars/jquery/jquery.min.js}"></script>
  </head>
  <body>
	  <nav th:replace="navmenu :: navmenu"></nav>
	<div class="text-center m-5"><h3>การคืน</h3></div>
  <div class="container my-5 col-md-8">
  	<table class="table  table-striped table-hover">
		<a>ข้อมูลผู้ยืม</a>
	 <thead>
		 <tr>
	      <th scope="col">ชื่อ-นามสกุล</th>
	      <th scope="col">เบอร์ติดต่อ</th>
	      <th scope="col">อีเมล์</th>
	    </tr>
	 </thead>
	 <tbody>
		 <tr>
	      <td>[[${customers.firstname}]]&nbsp[[${customers.lastname}]]</td>
	      <td>[[${customers.phonenumber}]]</td>
	      <td>[[${customers.email}]]</td>
	    </tr>
	 </tbody>
	</table>
	<table class="table  table-striped table-hover">
<thead>
    <tr>
      <th scope="col">รหัสหนังสือ</th>
       <th scope="col">ISBN</th>
      <th scope="col">ชื่อหนังสือ</th>
      <th scope="col">ชื่อผู้แต่ง</th>
      <th scope="col">จำนวนวันที่ยืมได้</th>
      <th scope="col">วันยืม</th>
      <th scope="col">วันครบกำหนดคืน</th>
      <th scope="col">เจ้าหน้าที่ผู้ยืม</th>
      <th scope="col">สถานะการคืน</th>
      <th scope="col">ดำเนินการ</th>
      
    </tr>
  </thead>
  <tbody> 
	<tr th:each="b,status : ${rental}" th:id="'row' + ${status.count}">
        <td th:text="${b.book.id}"></td>
        <td th:text="${b.book.isbn}"></td>
        <td th:text="${b.book.name}"></td>
        <td th:text="${b.book.author}"></td>
         <td th:text="${b.book.dayofrents}"></td>
        <td th:text="${b.rentalTime}"></td>
        <td th:text="${b.rentaEndtime}"></td>
        <td th:text="${b.userrent.firstName}"></td>
        <td th:text="${b.status}"></td>
      	<td>
      		<a class="btn btn-secondary btn-sm "  th:href="@{'/refund/'+ ${b.id}}">คืน</a>
      </td> 
    </tr>  
  </tbody>
</table>
<div class="container my-5">
<table class="table  table-striped table-hover ">
	<a>ประวัติการยืม</a>
<thead>
    <tr>
      <th scope="col">รหัสหนังสือ</th>
       <th scope="col">ISBN</th>
      <th scope="col">ชื่อหนังสือ</th>
      <th scope="col">ชื่อผู้แต่ง</th>
      <th scope="col">จำนวนวันที่ยืมได้</th>
      <th scope="col">วันยืม</th>
      <th scope="col">วันครบกำหนดคืน</th>
      <th scope="col">เจ้าหน้าที่ผู้ยืม</th>
      <th scope="col">เจ้าหน้าที่ผู้คืน</th>
      <th scope="col">สถานะการคืน</th>
      
    </tr>
  </thead>
  <tbody> 
	<tr th:each="b,status : ${hisRentals}" th:id="'row' + ${status.count}">
        <td th:text="${b.book.id}"></td>
        <td th:text="${b.book.isbn}"></td>
        <td th:text="${b.book.name}"></td>
        <td th:text="${b.book.author}"></td>
         <td th:text="${b.book.dayofrents}"></td>
        <td th:text="${b.rentalTime}"></td>
        <td th:text="${b.rentaEndtime}"></td>
        <td th:text="${b.userrent.firstName}"></td>
        <td th:text="${b.userrefund.firstName}"></td>
        <td th:text="${b.status}"></td>
    </tr>  
  </tbody>
</table>
</div>
  </div>

   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
	<script type="text/javascript" th:src="@{/js/refund.js}"></script>
	<script type="text/javascript">
		contextPath = "[[@{/}]]";
		var csrfHeaderName = "[[${_csrf.headerName}]]";
		var csrfValue = "[[${_csrf.token}]]";
		</script>
  </body>
</html>